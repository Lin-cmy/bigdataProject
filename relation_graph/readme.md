# Bç«™ç•ªå‰§äººç‰©å…³ç³»å›¾è°±æ„å»º
[![Python](https://img.shields.io/badge/Python-3.8%2B-blue)](https://www.python.org/)
[![Spark](https://img.shields.io/badge/Spark-GraphX-orange)](https://spark.apache.org/graphx/)
[![ECharts](https://img.shields.io/badge/Visualization-Force--Directed-green)](https://echarts.apache.org/)

  æœ¬æ¨¡å—æ—¨åœ¨ä»æµ·é‡éç»“æ„åŒ–å¼¹å¹•ä¸­è¿˜åŸç•ªå‰§äººç‰©çš„ç¤¾äº¤å…³ç³»ã€‚é€šè¿‡åˆ†æç”¨æˆ·å¯¹è§’è‰²åç§°çš„å…±ç°è®¨è®ºï¼ˆå³åŒä¸€æ¡å¼¹å¹•æˆ–çŸ­æ—¶é—´å†…åŒæ—¶æåˆ°ä¸¤ä¸ªè§’è‰²ï¼‰ï¼Œæ„å»ºæ— å‘åŠ æƒå›¾ã€‚ç»“åˆ PageRank ç®—æ³•è®¡ç®—è§’è‰²æ ¸å¿ƒåº¦ï¼Œåˆ©ç”¨ Louvain/LPA ç®—æ³•å‘ç°äººç‰©é˜µè¥ï¼ˆç¤¾åŒºï¼‰ï¼Œæœ€ç»ˆç”ŸæˆåŠ¨æ€äº¤äº’çš„åŠ›å¼•å¯¼å›¾è°±ã€‚

---

## âš¡ æ ¸å¿ƒåŠŸèƒ½ (Key Features)

1.  **å…±ç°å…³ç³»æå– (Co-occurrence Extraction)**
    * ä»å¼¹å¹•æ–‡æœ¬ä¸­æå–è§’è‰²å®ä½“ï¼ˆå¦‚â€œé˜¿å°¼äºšâ€ã€â€œæ¬¡å­â€ï¼‰ã€‚
    * è®¡ç®—è§’è‰²é—´çš„å…±ç°é¢‘ç‡ï¼Œç”Ÿæˆè¾¹ï¼ˆEdgeï¼‰çš„æƒé‡ã€‚

2.  **å›¾è®¡ç®—ä¸ç¤¾åŒºå‘ç° (Graph Computing)**
    * `danmaku_analysis_cluster.py`: æ ¸å¿ƒè®¡ç®—è„šæœ¬ã€‚
    * æ ¸å¿ƒåº¦åˆ†æï¼šè®¡ç®—èŠ‚ç‚¹çš„åº¦ä¸­å¿ƒæ€§æˆ– PageRank å€¼ï¼Œè¯†åˆ«ä¸»è§’ä¸æ ¸å¿ƒé…è§’ã€‚
    * é˜µè¥è¯†åˆ«ï¼šåŸºäºå›¾èšç±»ç®—æ³•ï¼Œè‡ªåŠ¨å°†å…³ç³»ç´§å¯†çš„è§’è‰²åˆ’åˆ†ä¸ºåŒä¸€é¢œè‰²é˜µè¥ï¼ˆå¦‚ï¼šç¦æ°ä¸€å®¶ vs æ€æ‰‹ç»„ç»‡ï¼‰ã€‚

3.  **äº¤äº’å¼å¯è§†åŒ– (Interactive Visualization)**
    * `visualize_graph.py`: å°†å›¾è®¡ç®—ç»“æœè½¬åŒ–ä¸º HTML å¯è§†åŒ–é¡µé¢ã€‚
    * åŠ›å¼•å¯¼å¸ƒå±€ (Force-Directed Layout)ï¼šåŠ¨æ€å±•ç¤ºèŠ‚ç‚¹é—´çš„å¼•åŠ›ä¸æ–¥åŠ›ï¼Œç›´è§‚å‘ˆç°å…³ç³»ç–å¯†ã€‚
    * å±æ€§æ˜ å°„ï¼šèŠ‚ç‚¹å¤§å°æ˜ å°„å½±å“åŠ›ï¼ŒèŠ‚ç‚¹é¢œè‰²æ˜ å°„æ‰€å±é˜µè¥ã€‚

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„ (File Structure)

```text
relation_graph/
â”œâ”€â”€ danmaku_analysis_cluster.py  # [ç®—æ³•] Spark å›¾è®¡ç®—æ ¸å¿ƒé€»è¾‘ (èŠ‚ç‚¹/è¾¹ç”Ÿæˆ + èšç±»)
â”œâ”€â”€ visualize_graph.py           # [å±•ç¤º] è¯»å–è®¡ç®—ç»“æœï¼Œç”Ÿæˆ ECharts HTML
â”œâ”€â”€ dataset_processed/           # [æ•°æ®] å›¾è®¡ç®—ç”Ÿæˆçš„ä¸­é—´ç»“æœ
â”‚   â”œâ”€â”€ fanRen_result_nodes.csv  # èŠ‚ç‚¹æ•°æ® (Id, Label, Weight, Category)
â”‚   â”œâ”€â”€ fanRen_result_edges.csv  # è¾¹æ•°æ® (Source, Target, Weight)
â”‚   â”œâ”€â”€ spy_family_result_nodes.csv
â”‚   â””â”€â”€ spy_family_result_edges.csv
â”œâ”€â”€ fanRen_relation.html         # [ç»“æœ] ã€Šå‡¡äººä¿®ä»™ä¼ ã€‹å…³ç³»å›¾è°±
â”œâ”€â”€ spy_family_relation.html     # [ç»“æœ] ã€Šé—´è°è¿‡å®¶å®¶ã€‹å…³ç³»å›¾è°±
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

------

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. æ•°æ®å‡†å¤‡

ç¡®ä¿ä½ å·²ç»æœ‰äº†å¼¹å¹•çš„åŸå§‹æ•°æ®ï¼ˆCSVæ ¼å¼ï¼‰ï¼Œæˆ–è€…æ˜¯ç»è¿‡é¢„å¤„ç†çš„åˆ†è¯ç»“æœã€‚

### 2. è¿è¡Œå›¾è®¡ç®—

ä½¿ç”¨ Spark è¿è¡Œåˆ†æè„šæœ¬ï¼Œç”ŸæˆèŠ‚ç‚¹å’Œè¾¹æ–‡ä»¶ï¼š

```
# æäº¤ Spark ä»»åŠ¡
spark-submit --master local[*] relation_graph/danmaku_analysis_cluster.py
```

*è¾“å‡ºï¼šè¯¥è„šæœ¬ä¼šåœ¨ `dataset_processed/` ç›®å½•ä¸‹ç”Ÿæˆ `_nodes.csv` å’Œ `_edges.csv` æ–‡ä»¶ã€‚*

### 3. ç”Ÿæˆå¯è§†åŒ–

è¿è¡Œ Python è„šæœ¬è¯»å– CSV å¹¶ç”Ÿæˆ HTMLï¼š

```
python relation_graph/visualize_graph.py
```

*è¾“å‡ºï¼šç”Ÿæˆ `spy_family_relation.html` ç­‰ç½‘é¡µæ–‡ä»¶ã€‚

------

## âš ï¸ æ³¨æ„äº‹é¡¹

- è§’è‰²åç§°çš„**å®ä½“å¯¹é½**æ˜¯å›¾è°±è´¨é‡çš„å…³é”®ï¼Œå»ºè®®å…ˆè¿›è¡Œè¯é¢‘ç»Ÿè®¡ä¼˜åŒ–åŒä¹‰è¯è¡¨ã€‚
- è¾¹æƒé‡çš„é˜ˆå€¼éœ€è¦æ ¹æ®å¼¹å¹•æ€»é‡åŠ¨æ€è°ƒæ•´ï¼Œè¿‡æ»¤æ‰ä½é¢‘çš„å¶ç„¶å…±ç°ã€‚